!function(){"use strict";function config($httpProvider,$mdThemingProvider){$httpProvider.interceptors.push("interceptor"),$mdThemingProvider.theme("default").primaryPalette("teal").accentPalette("blue-grey").warnPalette("red").backgroundPalette("blue-grey")}function run($log){$log.info("It's running")}angular.module("lolTot",["lolTot.core","lolTot.singup","ngMaterial"]).config(config).run(run)}(),function(){"use strict";function config(){}function run($log){$log.debug("load core module")}angular.module("lolTot.core",[]).config(config).run(run)}(),function(){"use strict";function config($stateProvider){$stateProvider.state("singup",{url:"",templateUrl:"./views/singup/singup.tpl.html",controller:"SingupController",controllerAs:"vm"})}function run($log){$log.debug("load core module")}angular.module("lolTot.singup",["ui.router","ngUnderscore"]).config(config).run(run)}(),angular.module("psAdvance.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("views/index.html",'<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="utf-8">\n        <title>lol tournament</title>\n        <link rel="icon" type="image/png" href="./img/favicon.png">\n\n        <!-- build:css styles/style.min.css -->\n        <!-- bower:css -->\n        <!-- endbower -->\n        <!-- inject:css -->\n        <!-- endinject -->\n        <!-- endbuild -->\n\n        <!-- build:js js/vendor.min.js -->\n        <!-- bower:js -->\n        <!-- endbower -->\n        <!-- endbuild -->\n        <!-- build:js js/app.min.js -->\n        <!-- inject:js -->\n        <!-- endinject -->\n        <!-- endbuild -->\n    </head>\n    <body ng-app="lolTot" ui-view>\n\n    </body>\n</html>\n'),$templateCache.put("views/singup/singup.tpl.html",'<section id="main" layout="row" layout-align="center">\n    <div flex="60" flex-md="80" flex-sm="100" class="md-whiteframe-z1" layout-fill>\n        <md-toolbar class="md-tall">\n            <div class="md-toolbar-tools">\n                <span>Liga UN <small>Torneo de vacaciones</small></span>\n                <span flex=""></span>\n                <md-button class="md-icon-button" aria-label="Ayuda">\n                    <md-icon md-svg-icon="img/icons/help-circle.svg" style="color: rgba(255,255,255, 0.2)"></md-icon>\n                </md-button>\n            </div>\n            <div ng-if="vm.summoners.length > 0"\n                class="md-toolbar-tools md-toolbar-tools-bottom md-accent animated fadeIn"\n                layout="row" layout-align="end center">\n                <span ng-class="{warn: !vm.validator.leaguePoints()} ">\n                    {{vm.validator.totalPoints()}}\n                </span>\n                <span>\n                    /{{vm.validator.maxPoints}}\n                </span>\n            </div>\n        </md-toolbar>\n        <md-content>\n            <br>\n            <md-list>\n                <md-list-item class="md-5-line" ng-repeat="item in vm.summonersForm"\n                layout-align="center center">\n                    <img ng-if="!item.data" ng-class="{zoomIn: !animated, fadeOutDown: animated}"\n                    ng-src="http://ddragon.leagueoflegends.com/cdn/5.2.1/img/profileicon/{{item.profileIconId}}.png" class="md-avatar animated" />\n                    <img ng-if="item.data" ng-class="{flip: !animated, fadeOutDown: animated}"\n                    ng-src="http://avatar.leagueoflegends.com/LA1/{{item.data.name}}.png"\n                    class="md-avatar animated" />\n                    <div class="md-list-item-text">\n                        <form name="summonerForm" ng-submit="vm.getSummoner(item.name, $index)"\n                        layout="row" layout-align="center center">\n                        <md-input-container>\n                            <label>Nombre de invocador</label>\n                            <input ng-model="item.name"\n                            ng-model-options="{ updateOn:\'blur\'}"\n                            ng-change="vm.getSummoner(item.name, $index)" type="text">\n                        </md-input-container>\n                        <md-button class="md-icon-button" aria-label="Favorite">\n                            <md-icon md-svg-icon="img/icons/send.svg"></md-icon>\n                        </md-button>\n                    </form>\n                </div>\n                <div ng-if="item.data.league">\n                    <img ng-if="item.data.league != \'unranked\'" class="league animated" ng-class="{zoomIn: !animated, fadeOutDown: animated}"\n                    ng-src="img/leagues/{{item.data.league[0].tier}}_{{item.data.league[0].entries[0].division}}.png"/>\n                    <img ng-if="item.data.league == \'unranked\' " class="league animated" ng-class="{zoomIn: !animated, fadeOutDown: animated}"\n                    ng-src="img/leagues/provisional.png"/>\n                </div>\n            </md-list-item>\n        </md-list>\n\n            <form name="singupForm" ng-show="vm.validator.all()" class="animated slideInDownBig"\n            ng-submit="vm.subscribeTeam(subscribe)" layout="column" layout-align="center center">\n\n                <div ng-hide="vm.mailchimp.result === \'success\'" class="singupForm" layout="column"\n                layout-align="center center" >\n                    <md-input-container>\n                        <label>Nombre del equipo</label>\n                        <input ng-model="subscribe.TEAMNAME" name="teamName" type="text" required>\n                        <div ng-messages="singupForm.teamName.$error" ng-if="singupForm.teamName.$dirty">\n                            <div ng-if="singupForm.teamName.$error.required" ng-message="required">Campo obligatorio</div>\n                        </div>\n                    </md-input-container>\n                    <md-input-container>\n                        <label>Correo de contacto</label>\n                        <input ng-model="subscribe.EMAIL" name="mail" type="mail" pattern="(\\W|^)[\\w.+\\-]*@unal\\.edu\\.co(\\W|$)" required>\n                        <div ng-messages="singupForm.mail.$error" ng-if="singupForm.mail.$dirty">\n                            <div ng-if="singupForm.mail.$error.required" ng-message="required">Campo obligatorio</div>\n                            <div ng-if="singupForm.mail.$error.pattern" ng-message="pattern">Tiene que ser un correo @unal.edu.co</div>\n                        </div>\n                    </md-input-container>\n\n                    <p class="md-body-2 warn" ng-show="vm.mailchimp.result == \'error\'">\n                        Error: {{vm.mailchimp.msg}}\n                    </p>\n\n                    <md-button class="md-raised md-primary" ng-disabled="singupForm.$invalid">\n                        Inscribir\n                    </md-button>\n                </div>\n\n                <md-card ng-show="vm.mailchimp.result == \'success\'" class="animated fadeIn success">\n                    <p class="md-body-2">\n                        {{vm.mailchimp.msg}}\n                    </p>\n                </md-card>\n            </form>\n            <br>\n        </md-content>\n    </div>\n</section>\n\n<footer>\n    <center>\n        <br>\n        <p class="md-caption">\n            Si te gustó esta aplicación no dudes en darle\n            <md-icon ng-style="{\'font-size\': \'5px\', height: \'18px\'}" md-svg-icon="img/icons/star.svg"></md-icon> en                         <a href="http://github.com/LigaUN/lolTot" target="_blank"><md-icon  ng-style="{\'font-size\': \'5px\', height: \'18px\'}"                     md-svg-icon="img/icons/github-box.svg"></md-icon></a>\n        </p>\n        <br>\n    </center>\n</footer>\n')}]),function(){"use strict";var apiRouter={url:{protocol:"https",host:"na.api.pvp.net/api/lol/lan"},route:function(path){var url=this.url;return"{0}://{1}/{2}".format(url.protocol,url.host,path)},id:function(url){var router=this;return function(id){return"{0}/{1}".format(router.route(url),id)}}},api={id:apiRouter.id,summonerByName:function(name){return apiRouter.route("v1.4/summoner/by-name/{0}".format(name))},summonerLeague:function(id){return apiRouter.route("v2.5/league/by-summoner/{0}/entry".format(id))}};angular.module("lolTot.core").constant("api",api)}(),function(){"use strict";function interceptor($q,$injector){return{responseError:function(res){var $mdToast=$injector.get("$mdToast"),messages={404:"El recurso solicitado ha entrado en sigilo",500:"Se produjo un error en el servidor",503:"Servicio no disponible :("},dontNotify=res.config.dontNotify;return!dontNotify&&messages[res.status]&&$mdToast.show($mdToast.simple().content(messages[res.status]).hideDelay(3e3)),$q.reject(res)}}}angular.module("lolTot.core").factory("interceptor",interceptor)}(),function(){"use strict";var leagues={noob:16,unrank:32,bronze:{i:112,ii:96,iii:80,iv:64,v:48},silver:{i:192,ii:176,iii:160,iv:144,v:128},gold:{i:272,ii:256,iii:240,iv:224,v:208},platinum:{i:352,ii:336,iii:320,iv:304,v:288},diamond:{i:432,ii:416,iii:400,iv:384,v:368},maester:448,challenger:464};angular.module("lolTot.singup").constant("leagues",leagues).value("maxPoints",810)}(),function(){"use strict";var mailchimp={dc:"us11",id:"098b71b7e8",u:"d158b283d7dc31c221cb2ca5a",username:"svzosorio"};angular.module("lolTot.singup").constant("mailchimp",mailchimp)}(),function(){"use strict";function SingupController($log,$timeout,leagues,maxPoints,_,Summoner,Mailchimp){function getSummoner(summoner,index){Summoner.get(summoner).then(function(data){Summoner.getLeague(data.id,!0).then(function(dataLeague){data.league=dataLeague,vm.summonersForm[index].data=data,vm.summoners[index]=data.name}).catch(function(error){404===error.status&&(data.league="unranked",vm.summonersForm[index].data=data,vm.summoners[index]=data.name)})}).catch(function(){vm.summonersForm[index]&&vm.summonersForm[index].data&&delete vm.summonersForm[index].data})}var vm=this;vm.getSummoner=getSummoner,vm.summoners=[],vm.mailchimp={},vm.summonersForm=[{profileIconId:657},{profileIconId:658},{profileIconId:659},{profileIconId:660},{profileIconId:661}],vm.getTop=function(){return vm.summoners[4]},vm.validator={maxPoints:maxPoints,noRepeat:function(){var isUndefined=0;return _.each(vm.summoners,function(summoner){summoner||isUndefined++}),5===_.uniq(vm.summoners).length&&!isUndefined},totalPoints:function(){var totalPoints=0;return _.each(vm.summonersForm,function(summoner){if(summoner.data&&summoner.data.summonerLevel<30)totalPoints+=leagues.noob;else if(summoner.data&&"unranked"===summoner.data.league)totalPoints+=leagues.unrank;else if(summoner.data&&summoner.data.league[0].tier){var tier=summoner.data.league[0].tier.toLowerCase(),division=summoner.data.league[0].entries[0].division.toLowerCase();totalPoints+=leagues[tier][division]}totalPoints+=0}),totalPoints},leaguePoints:function(){return this.totalPoints()<=maxPoints},all:function(){return this.noRepeat()&&this.leaguePoints()}},vm.subscribeTeam=function(subscribe){subscribe.TOP=vm.summoners[0],subscribe.JUNGLE=vm.summoners[1],subscribe.MID=vm.summoners[2],subscribe.ADC=vm.summoners[3],subscribe.SUPPORT=vm.summoners[4],Mailchimp.send(subscribe).then(function(data){vm.mailchimp=data})}}angular.module("lolTot.singup").controller("SingupController",SingupController)}(),function(){"use strict";function Mailchimp($http,mailchimp){this.send=function(params){return params.c="JSON_CALLBACK",params.dc=mailchimp.dc,params.id=mailchimp.id,params.u=mailchimp.u,params.username=mailchimp.username,$http.jsonp("http://svzosorio.us11.list-manage.com/subscribe/post-json",{params:params}).then(function(response){return response.data})}}angular.module("lolTot.singup").service("Mailchimp",Mailchimp)}(),function(){"use strict";function Summoner($http,api,apiKey){this.get=function(summoner){return $http({method:"get",url:api.summonerByName(summoner),params:{api_key:apiKey}}).then(function(response){return response.data[summoner.replace(/\s/g,"").toLowerCase()]})},this.getLeague=function(summoner,dontNotify){return $http({method:"get",url:api.summonerLeague(summoner),params:{api_key:apiKey},dontNotify:dontNotify}).then(function(response){return response.data[summoner]})}}angular.module("lolTot.singup").service("Summoner",Summoner).value("apiKey","2cbc298c-f2f8-4af2-b1df-2739b768cdef")}();